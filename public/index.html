<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MN Sweepstakes Giveaway</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-gradient-to-b from-purple-100 to-white text-gray-800 font-sans">

<header class="bg-gradient-to-r from-purple-500 to-pink-500 text-white py-6 shadow-lg">
  <div class="max-w-5xl mx-auto text-center">
    <h1 class="text-4xl font-bold mb-2">🎉 Minnesota Sweepstakes Giveaway 🎉</h1>
    <p class="text-lg">Enter now for your chance to win exciting prizes! No purchase necessary.</p>
  </div>
</header>

<main class="max-w-4xl mx-auto py-10 px-4 space-y-12">

  <section class="bg-white rounded-2xl shadow-lg p-8 border border-purple-200">
    <h2 class="text-2xl font-semibold text-purple-600 mb-4">🎁 Current Prize</h2>
    <img src="https://images.unsplash.com/photo-1607082349566-187342175e2f" alt="Prize" class="rounded-xl shadow-md w-full h-64 object-cover mb-4" />
    <p class="text-lg">Win a <span class="font-semibold">$50 Amazon Gift Card</span>! Open to Minnesota residents 18+. Sweepstakes ends <strong>December 31, 2025</strong>.</p>
  </section>

  <section class="bg-white rounded-2xl shadow-lg p-8 border border-purple-200">
    <h2 class="text-2xl font-semibold text-purple-600 mb-4">💳 Pay to Enter</h2>
    <button id="payButton" class="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-xl shadow-lg">
      Pay $1 to Enter
    </button>
    <p class="mt-4 text-sm text-gray-600">
      No purchase necessary. Enter for free by filling out our <a href="#freeAMOE" class="underline text-indigo-600">free entry form</a>.
    </p>
  </section>

  <section id="freeAMOE" class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl shadow-lg p-8 border border-pink-200 mt-6">
    <h2 class="text-2xl font-semibold text-pink-600 mb-4">📝 Free Entry Form (AMOE)</h2>
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSf1kWZ-YqRnfNZ3qLI_P7zteIu2PwHx6GJgiGYIaSAIJrc/viewform?embedded=true" width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
  </section>

</main>

<footer class="bg-gradient-to-r from-purple-500 to-pink-500 text-white py-6 mt-10">
  <div class="max-w-4xl mx-auto text-center space-y-2">
    <p>© 2025 [Your Company Name]. All Rights Reserved.</p>
    <p class="text-sm">Contact: info@yourcompany.com</p>
  </div>
</footer>

<script>
  // LIVE Stripe publishable key
  const stripe = Stripe('pk_live_51SCWyeDOX42glWqQENCroWra4xzVhe8WOilKTLQTqsysGOdMDsf9vbcOGhArZVEEejYaLI6oraoB7thpFUD7Ggbp00Ylyt4Wjk');

  document.getElementById('payButton').addEventListener('click', async () => {
    try {
      const response = await fetch('/.netlify/functions/create-checkout-session', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' }
      });

      const session = await response.json();

      if(session.error){
        alert("Error creating checkout session: " + session.error);
        return;
      }

      await stripe.redirectToCheckout({ sessionId: session.id });

    } catch (err) {
      console.error("Stripe error:", err);
      alert("Payment failed. See console for details.");
    }
  });
</script>

</body>
</html>
